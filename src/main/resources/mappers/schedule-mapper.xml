<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="scheduleMapper">

	<resultMap id="scheduleResultSet" type="Schedule">
		<id property="scheduleNo" column="SCHEDULE_NO"/>
		<result property="empId" column="EMP_ID"/>
		<result property="scheduleTitle" column="SCHEDULE_TITLE"/>
		<result property="scheduleStart" column="SCHEDULE_START"/>
		<result property="scheduleEnd" column="SCHEDULE_END"/>
		<result property="scheduleDiscription" column="SCHEDULE_DISCRIPTION"/>
		<result property="scheduleTypeNo" column="SCHEDULE_TYPE_NO"/>
		<result property="scheduleBackground" column="SCHEDULE_BACKGROUNDCOLOR"/>
		<result property="scheduleAllDay" column="SCHEDULE_ALLDAY"/>
		<result property="userName" column="USER_NAME"/>
		<result property="deptName" column="DEPT_NAME"/>
	</resultMap>
	
		<resultMap id="empResultSet" type="Employee">
		<id property="empId" column="EMP_ID"/>
		<result property="deptName" column="DEPT_NAME"/>
		<result property="userName" column="USER_NAME"/>
		</resultMap>
	

	
	 <insert id="insertSchedule" parameterType="Schedule" >
	INSERT INTO SCHEDULE (SCHEDULE_NO, EMP_ID, SCHEDULE_TITLE, SCHEDULE_START, SCHEDULE_END, SCHEDULE_DISCRIPTION,)
	SCHEDULE_TYPE_NO, SCHEDULE_BACKGROUNDCOLOR, SCHEDULE_ALLDAY, USER_NAME, DEPT_NAME)
	VALUES (SCHEDULE_NO.NEXTVAL, #{empId}, #{scheduleTitle}, #{scheduleStart}, #{scheduleEnd}, #{scheduleDiscription}, 
	#{scheduleTypeNo}, #{scheduleBackground}, #{scheduleAllDay}, #{userName}, #{deptName})	
	</insert>

	<select id="selectEmployee" parameterType="Member" resultMap="empResultSet">
	 SELECT USER_NAME, DEPT_NAME 
	 FROM EMPLOYEE 
	 JOIN MEMBER USING (EMP_ID) 
	 JOIN DEPARTMENT USING (DEPT_CODE)
	 WHERE EMP_ID = #{empId}
	</select>
	
	
	
</mapper>
